# Google Cloud Datastore 제품 요구사항 정의서 (PRD)

## 1. 개요 (Overview)

Google Cloud Datastore는 Google Cloud Platform에서 제공하는 완전 관리형 NoSQL 문서 데이터베이스입니다. 웹 및 모바일 애플리케이션을 위한 확장 가능하고 고가용성의 데이터베이스 솔루션으로, 자동 확장, 강력한 일관성, ACID 트랜잭션을 지원합니다. 스키마가 없는 문서 기반 데이터 모델을 제공하여 개발자가 유연하게 데이터를 저장하고 쿼리할 수 있습니다.

## 2. 주요 기능 및 이점 (Key Features & Benefits)

### 2.1. 기능
- **완전 관리형 NoSQL**: 인프라 관리 없이 사용할 수 있는 완전 관리형 NoSQL 데이터베이스입니다.
- **자동 확장**: 트래픽과 데이터 크기에 따라 자동으로 확장되어 성능을 유지합니다.
- **강력한 일관성**: 강력한 일관성과 ACID 트랜잭션을 지원하여 데이터 무결성을 보장합니다.
- **유연한 스키마**: 스키마가 없는 문서 기반 데이터 모델로 개발 속도를 향상시킵니다.
- **고급 쿼리**: 복합 쿼리, 필터링, 정렬 등 다양한 쿼리 기능을 제공합니다.
- **실시간 업데이트**: 실시간 리스너를 통해 데이터 변경사항을 실시간으로 감지할 수 있습니다.

### 2.2. 이점
- **운영 간소화**: 완전 관리형 서비스로 데이터베이스 관리, 백업, 복제 등이 자동화됩니다.
- **높은 가용성**: 다중 리전 복제를 통해 99.95%의 가용성을 제공합니다.
- **비용 효율성**: 사용한 만큼만 비용을 지불하는 종량제 요금 체계입니다.
- **보안**: 전송 중 및 저장 시 암호화, IAM 통합, VPC Service Controls 지원으로 강력한 보안을 제공합니다.
- **개발자 친화적**: 다양한 언어의 클라이언트 라이브러리와 Firebase SDK를 제공합니다.

## 3. 사용 사례 (Use Cases)

- **웹 및 모바일 애플리케이션**: 사용자 프로필, 세션 데이터, 애플리케이션 상태 저장
- **실시간 애플리케이션**: 채팅 애플리케이션, 협업 도구, 게임 등 실시간 데이터 동기화가 필요한 애플리케이션
- **콘텐츠 관리**: 블로그, CMS, 카탈로그 등 유연한 스키마가 필요한 콘텐츠 관리 시스템
- **IoT 데이터 저장**: 센서 데이터, 디바이스 상태 등 IoT 애플리케이션의 데이터 저장
- **사용자 개인화**: 추천 시스템, 사용자 설정, 개인화된 콘텐츠 제공
- **카탈로그 및 인벤토리**: 제품 카탈로그, 재고 관리 등 다양한 속성을 가진 아이템 관리

---

## 4. 수집 기능 요구사항 (Collection Requirements)

이 섹션은 SpaceONE 플러그인에서 Datastore 리소스를 수집하기 위한 상세 요구사항을 기술합니다.

### 4.1. 수집 리소스
- **Database**: 프로젝트 내의 모든 Datastore 데이터베이스를 수집의 기본 단위로 합니다. (삭제된 리소스는 제외)
- **Index**: 각 `DATASTORE_MODE` 데이터베이스 내의 모든 인덱스를 수집합니다.
- **Namespace & Kind**: 각 `DATASTORE_MODE` 데이터베이스 내의 모든 네임스페이스와 관련 Kind를 수집합니다.

### 4.2. 핵심 수집 데이터

#### 4.2.1. Database 관련 데이터
- **기본 정보**: Database ID, 프로젝트 ID, 위치(Location ID), 타입 (`DATASTORE_MODE`), 동시성 제어(Concurrency Control), 생성 시간, Etag

#### 4.2.2. Index 관련 데이터 (데이터베이스별)
- **기본 정보**: 인덱스 ID, Kind 이름, 상태(생성중, 준비됨, 삭제중 등), 조상 설정
- **인덱스 구성**:
  - **속성 정보**: 인덱스를 구성하는 속성들의 이름과 정렬 방향(ASC/DESC)
- **메타데이터**: 소속된 Database ID, 프로젝트 ID

#### 4.2.3. Namespace & Kind 관련 데이터 (데이터베이스별)
- **기본 정보**: 네임스페이스 ID (또는 `(default)`), 표시 이름
- **Kind 정보**: 해당 네임스페이스에 속한 모든 Kind 목록과 개수
- **메타데이터**: 소속된 Database ID, 프로젝트 ID

### 4.3. 수집 메트릭
- **인덱스 개수 (index_count)**: 프로젝트별 Datastore 인덱스 개수를 집계합니다.
- **네임스페이스 개수 (namespace_count)**: 프로젝트별 네임스페이스 개수를 집계합니다.

### 4.4. 주요 기능 요구사항 및 현재 구현 상태

#### 기능 요구사항
- **데이터베이스 중심 수집**: 프로젝트 내 여러 데이터베이스를 식별하고, `DATASTORE_MODE` 타입의 데이터베이스에 대해서만 리소스를 수집하여 정확도를 높입니다.
- **다중 API 활용**: Datastore Admin API와 Data API를 모두 사용하여 각각의 목적에 맞게 인덱스, 네임스페이스, Kind 등 다양한 정보를 종합적으로 수집합니다.
- **SpaceONE 모델 변환**: 수집된 모든 원시 데이터를 SpaceONE의 Cloud Service 모델 형식에 맞게 변환하여 일관된 데이터 관리를 지원합니다.
- **동적 UI 레이아웃 제공**: SpaceONE 콘솔에서 사용자가 수집된 Datastore 리소스(데이터베이스, 인덱스, 네임스페이스 등)의 정보를 쉽게 파악할 수 있도록 동적 테이블 및 항목 레이아웃을 제공합니다.

#### 현재 구현된 기능
- **프로젝트 단위 리소스 수집**: 현재 구현은 프로젝트를 기준으로 리소스를 수집하며, 프로젝트 내 단일 기본 데이터베이스를 대상으로 합니다. 여러 데이터베이스를 명시적으로 구분하여 조회하지 않습니다.
- **Admin/Data API 활용**:
    - **Admin API**: 프로젝트의 모든 인덱스를 조회하는 데 사용합니다.
    - **Data API**: `runQuery`를 사용하여 프로젝트의 모든 네임스페이스와 각 네임스페이스에 속한 Kind를 조회합니다.
- **내부용 종류 필터링**: `__` (밑줄 두 개)로 시작하는 GCP 내부 통계용 종류(Kind)는 수집 결과에서 자동으로 제외하여 사용자가 생성한 데이터만 표시합니다. 