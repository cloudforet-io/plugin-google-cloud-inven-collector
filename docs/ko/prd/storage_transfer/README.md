# Google Cloud Storage Transfer 제품 요구사항 정의서 (PRD)

## 1. 개요 (Overview)

Google Cloud Storage Transfer Service는 다양한 소스에서 Google Cloud Storage로 데이터를 안전하고 빠르게 마이그레이션할 수 있도록 지원하는 완전 관리형 서비스입니다. Amazon S3, Microsoft Azure Storage와 같은 다른 클라우드 제공업체, 온프레미스 데이터 센터, 그리고 Google Cloud Storage 버킷 간의 데이터 전송을 자동화하고 가속화합니다.

## 2. 주요 기능 및 이점 (Key Features & Benefits)

### 2.1. 기능
- **다양한 소스 지원**: Amazon S3, Azure Storage, HTTP/HTTPS 엔드포인트, 온프레미스 파일 시스템 및 다른 Google Cloud Storage 버킷에서 데이터를 가져올 수 있습니다.
- **보안 및 무결성**: 전송 중 데이터 암호화 및 종단 간 체크섬 검증을 통해 데이터 무결성을 보장합니다.
- **증분 전송 (Incremental Transfers)**: 소스에서 변경되거나 추가된 파일만 식별하여 전송함으로써 전송 시간과 비용을 최소화합니다.
- **메타데이터 보존**: 파일 생성 시간, 소유자, ACL 등 원본 메타데이터를 그대로 보존합니다.
- **전송 스케줄링**: 일회성 전송 또는 일별, 주별 등 반복되는 전송 작업을 예약하여 데이터 파이프라인을 자동화할 수 있습니다.
- **코드 없는 관리**: 코드를 작성할 필요 없이 Google Cloud Console을 통해 모든 전송 작업을 중앙에서 관리하고 모니터링할 수 있습니다.
- **동적 확장 및 대역폭 조절**: 대규모 데이터 전송을 위해 동적으로 확장되며, 네트워크 대역폭 사용량을 조절하여 다른 비즈니스 운영에 미치는 영향을 최소화할 수 있습니다.

### 2.2. 이점
- **운영 효율성**: 복잡한 스크립트나 수동 프로세스 없이 대규모 데이터 마이그레이션을 자동화하여 운영 부담을 줄입니다.
- **비용 절감**: 증분 전송 및 최적화된 전송 파이프라인을 통해 불필요한 데이터 전송을 줄여 비용을 절감합니다.
- **빠른 마이그레이션**: Google의 고성능 네트워크를 활용하여 대용량 데이터를 빠르고 안정적으로 이전할 수 있습니다.
- **강화된 보안**: 전송 전 과정에서 데이터가 암호화되고 무결성이 검증되어 안전한 데이터 이동을 보장합니다.

## 3. 사용 사례 (Use Cases)

- **데이터 센터 마이그레이션**: 온프레미스 스토리지 시스템의 데이터를 클라우드로 이전합니다.
- **콘텐츠 전송 네트워크(CDN) 구축**: 미디어 파일, 로그 등 대규모 콘텐츠를 Cloud Storage로 옮겨 전 세계 사용자에게 배포합니다.
- **재해 복구(DR) 환경 구축**: 중요한 데이터를 다른 리전의 Cloud Storage 버킷에 정기적으로 백업하여 재해 복구 체계를 마련합니다.
- **데이터 레이크 구축**: 분석 및 머신러닝을 위해 다양한 소스의 데이터를 Cloud Storage 기반의 데이터 레이크로 통합합니다.
- **클라우드 간 데이터 이동**: AWS S3나 Azure Storage에 있는 데이터를 Google Cloud로 이전하여 멀티 클라우드 전략을 지원합니다.

---

## 4. 수집 기능 요구사항 (Collection Requirements)

이 섹션은 SpaceONE 플러그인에서 Storage Transfer Service 리소스를 수집하기 위한 상세 요구사항을 기술합니다.

### 4.1. 수집 리소스
- **서비스 계정 (Service Account)**: Storage Transfer Service가 사용하는 프로젝트의 전용 Google 관리형 서비스 계정 정보를 수집합니다.
- **에이전트 풀 (Agent Pool)**: 온프레미스 데이터 전송을 위해 사용되는 에이전트 풀 목록을 수집합니다.
- **전송 작업 (Transfer Job)**: 프로젝트 내에 생성된 모든 전송 작업을 수집합니다.
- **전송 작업 실행 (Transfer Operation)**: 각 전송 작업의 모든 실행 기록을 수집하여 상태 및 성능을 추적합니다.

### 4.2. 핵심 수집 데이터

#### 4.2.1. 서비스 계정 관련 데이터
- **계정 이메일**: 서비스 계정의 이메일 주소
- **고유 ID (Subject ID)**: 서비스 계정의 고유 식별자

#### 4.2.2. 에이전트 풀 관련 데이터
- **이름**: 에이전트 풀의 전체 리소스 이름
- **표시 이름**: 사용자가 지정한 에이전트 풀의 표시 이름
- **상태**: 에이전트 풀의 현재 상태 (e.g., `CREATED`, `CONNECTED`)
- **대역폭 제한**: 에이전트 풀에 설정된 대역폭 제한 (bytes per second)

#### 4.2.3. 전송 작업 (Transfer Job) 관련 데이터
- **기본 정보**: 작업 이름, 프로젝트 ID, 상태 (`ENABLED`, `DISABLED`, `DELETED`), 생성/수정/삭제 시간, 설명
- **전송 사양**: 소스(Source) 및 싱크(Sink) 정보, 덮어쓰기 등 전송 옵션
- **스케줄**: 일회성 또는 반복 실행을 위한 스케줄 정보
- **알림 구성**: Pub/Sub 기반의 이벤트 알림 설정

#### 4.2.4. 전송 작업 실행 (Transfer Operation) 관련 데이터
- **기본 정보**: 작업 실행 이름, 소속된 전송 작업 이름, 상태 (`IN_PROGRESS`, `SUCCESS`, `FAILED`)
- **성능 카운터**: 찾은 파일/바이트 수, 전송된 파일/바이트 수, 삭제된 파일/바이트 수 등
- **시간 정보**: 작업 시작 및 종료 시간
- **오류 로그**: 전송 실패 시 관련 오류 요약

### 4.3. 수집 메트릭
- **전송 처리량 (transfer_throughput)**: 전송 작업의 평균 데이터 처리량 (바이트/초).
- **전송된 객체 수 (objects_transferred)**: 성공적으로 전송된 객체(파일)의 총 개수.
- **실패한 객체 수 (objects_failed)**: 전송에 실패한 객체의 수.

### 4.4. 주요 구현 기능
- **전체 리소스 조회**: 프로젝트를 기준으로 관련된 모든 하위 리소스를 수집합니다.
    1. **서비스 계정 조회**: `googleServiceAccounts.get` API를 사용하여 프로젝트의 전용 서비스 계정 정보를 가져옵니다.
    2. **에이전트 풀 조회**: `projects.agentPools.list` API를 사용하여 프로젝트의 모든 에이전트 풀을 조회합니다.
    3. **전송 작업 조회**: `transferJobs.list` API를 사용하여 프로젝트의 모든 전송 작업을 조회합니다.
    4. **작업별 실행 내역 조회**: 각 전송 작업에 대해 `transferOperations.list` API를 호출하여 상세 실행 기록을 수집합니다.
- **SpaceONE 모델 변환**: 수집된 모든 원시 데이터를 SpaceONE의 Cloud Service 모델 형식에 맞게 변환하여 일관된 데이터 관리를 지원합니다.
- **동적 UI 레이아웃 제공**: SpaceONE 콘솔에서 사용자가 수집된 리소스의 정보를 쉽게 파악할 수 있도록 동적 테이블 및 항목 레이아웃을 제공합니다.
