# Google Cloud Filestore 제품 요구사항 정의서 (PRD)

## 1. 개요 (Overview)

Google Cloud Filestore는 Google Cloud Platform에서 제공하는 완전 관리형 NFS(Network File System) 파일 스토리지 서비스입니다. 고성능 컴퓨팅 워크로드, 콘텐츠 관리, 웹 서빙, 데이터 분석 등 다양한 애플리케이션에서 공유 파일 스토리지가 필요한 경우에 사용됩니다. 완전 관리형 서비스로 제공되어 인프라 관리 부담 없이 확장 가능하고 고성능의 파일 시스템을 사용할 수 있습니다.

## 2. 주요 기능 및 이점 (Key Features & Benefits)

### 2.1. 기능
- **완전 관리형 NFS**: NFSv3 프로토콜을 지원하는 완전 관리형 파일 시스템으로 복잡한 설정이나 관리가 불필요합니다.
- **고성능**: 높은 IOPS와 처리량을 제공하여 고성능 컴퓨팅 워크로드에 적합합니다.
- **확장성**: 1TB부터 100TB까지 용량을 필요에 따라 확장할 수 있습니다.
- **다중 인스턴스 액세스**: 여러 Compute Engine 인스턴스에서 동시에 파일 시스템에 액세스할 수 있습니다.
- **백업 및 스냅샷**: 자동 백업과 스냅샷 기능을 통해 데이터 보호를 제공합니다.
- **네트워크 보안**: VPC 네트워크 내에서 안전하게 운영되며 방화벽 규칙을 통한 액세스 제어가 가능합니다.

### 2.2. 이점
- **운영 간소화**: 완전 관리형 서비스로 패치, 업데이트, 모니터링 등의 운영 작업이 자동화됩니다.
- **비용 효율성**: 사용한 만큼만 비용을 지불하며, 온프레미스 NFS 구축 대비 총 소유 비용(TCO)을 절감할 수 있습니다.
- **높은 가용성**: Google의 인프라를 기반으로 높은 가용성과 내구성을 제공합니다.
- **쉬운 통합**: Compute Engine, GKE, Cloud Run 등 다른 Google Cloud 서비스와 쉽게 통합됩니다.

## 3. 사용 사례 (Use Cases)

- **고성능 컴퓨팅(HPC)**: 과학 계산, 시뮬레이션, 렌더링 등 고성능 컴퓨팅 워크로드에서 공유 스토리지로 활용
- **콘텐츠 관리**: 미디어 파일, 문서, 이미지 등의 콘텐츠를 여러 애플리케이션에서 공유
- **웹 서빙**: 정적 웹 콘텐츠나 공유 자산을 여러 웹 서버에서 서빙
- **데이터 분석**: 대용량 데이터셋을 여러 분석 도구나 컴퓨팅 인스턴스에서 공유하여 처리
- **애플리케이션 마이그레이션**: 온프레미스 NFS 기반 애플리케이션을 클라우드로 마이그레이션
- **컨테이너 워크로드**: Kubernetes 환경에서 영구 볼륨으로 활용

---

## 4. 현재 구현된 수집 기능 (Based on Source Code)

이 섹션은 현재 SpaceONE 플러그인에서 실제로 구현하고 수집하는 Filestore 리소스의 상세 내역을 기술합니다.

### 4.1. 수집 리소스
- **Filestore Instance**: Google Cloud 프로젝트 내의 모든 Filestore 인스턴스를 수집 대상으로 합니다.

### 4.2. 핵심 수집 데이터
- **기본 정보**: 인스턴스 이름, 상태(생성중, 실행중, 삭제중 등), 생성 시간, 라벨, 설명
- **인스턴스 구성 (Instance Configuration)**:
  - **위치 정보**: 리전, 존 정보
  - **네트워크 설정**: VPC 네트워크, 서브네트워크, 예약된 IP 범위, 연결 모드
  - **성능 계층**: Basic HDD, Basic SSD, High Scale SSD 등의 성능 계층 정보
  - **용량 정보**: 할당된 용량(GB), 사용 가능한 용량
- **파일 공유 (File Shares)**:
  - **기본 파일 공유**: 인스턴스의 기본 파일 공유 정보 (이름, 용량, NFS 내보내기 옵션)
  - **상세 파일 공유**: v1beta1 API를 통한 추가 파일 공유 정보 (마운트 이름, 설명, 상태, 라벨)
- **백업 및 스냅샷**: 인스턴스와 연관된 백업 및 스냅샷 목록 정보
- **모니터링 정보**: 인스턴스의 상태 및 성능 관련 정보

### 4.3. 수집 메트릭
- **인스턴스 개수 (filestore_count)**: 프로젝트별 Filestore 인스턴스 개수를 수집합니다.
- **총 용량 (capacity_gb)**: Filestore 인스턴스의 총 할당 용량(GB)을 수집합니다.

### 4.4. 주요 구현 기능
- **다중 API 버전 지원**: v1 API(기본 기능)와 v1beta1 API(고급 기능)를 모두 활용하여 포괄적인 데이터를 수집합니다.
- **전역 리소스 조회**: 모든 리전의 Filestore 인스턴스를 한 번의 API 호출로 효율적으로 조회합니다.
- **상세 정보 수집**: 각 인스턴스의 파일 공유, 백업, 스냅샷 등 관련 리소스까지 포함하여 수집합니다.
- **SpaceONE 통합**: 수집된 데이터를 SpaceONE의 Cloud Service 모델 형식에 맞게 변환하여 콘솔에서 직관적으로 확인할 수 있도록 제공합니다.

### 4.5. 수집 데이터 구조
- **Network**: VPC 네트워크, 연결 모드, 예약된 IP 범위 정보
- **FileShare**: 파일 공유 이름, 용량, 소스 백업, NFS 내보내기 옵션
- **DetailedShare**: 상세 파일 공유 정보 (마운트 이름, 설명, 상태, 라벨)
- **Snapshot**: 스냅샷 이름, 상태, 생성 시간, 소스 파일 공유 정보
- **Stats**: 총 용량, 사용된 용량, 가용 용량 등 통계 정보 