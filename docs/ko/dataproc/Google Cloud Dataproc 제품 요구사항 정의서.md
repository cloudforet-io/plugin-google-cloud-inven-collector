# Google Cloud Dataproc 제품 요구사항 정의서 (PRD)

## 1. 개요 (Overview)

Google Cloud Dataproc은 Apache Spark, Hadoop 및 30개 이상의 오픈소스 프레임워크를 위한 완전 관리형 플랫폼입니다. 복잡한 데이터 처리 클러스터의 생성, 확장, 관리를 자동화하여 데이터 엔지니어와 데이터 과학자가 인프라 운영보다 분석 작업 자체에 집중할 수 있도록 지원합니다.

## 2. 주요 기능 및 이점 (Key Features & Benefits)

### 2.1. 기능
- **관리형 클러스터**: Spark 및 Hadoop 클러스터를 완전 관리형으로 제공하여 제어 및 맞춤설정이 용이합니다.
- **성능 가속화**: Lightning Engine을 통해 Spark 워크로드, 특히 Spark SQL 및 DataFrame 작업의 성능을 크게 향상시킵니다.
- **광범위한 오픈소스 지원**: Flink, Trino, Hive 등 30개 이상의 다양한 오픈소스 프레임워크를 지원합니다.
- **유연한 구성 및 통합**: GPU를 포함한 다양한 머신 유형, 자동 확장, 초기화 작업 등을 지원하며, BigQuery, Vertex AI 등 다른 Google Cloud 서비스와 쉽게 통합하여 엔드 투 엔드 솔루션을 구축할 수 있습니다.

### 2.2. 이점
- **비용 효율성**: 자동 확장 및 선점형 VM과 같은 기능을 통해 다른 클라우드 대안 대비 비용을 절감할 수 있습니다.
- **운영 간소화**: 복잡한 클러스터 관리 및 모니터링을 자동화하여 데이터 엔지니어와 과학자가 분석 작업에 집중할 수 있도록 합니다.
- **강력한 보안**: Kerberos 및 Apache Ranger와의 통합, IAM, VPC 서비스 제어 등 엔터프라이즈급 보안 기능을 활용하여 데이터를 안전하게 보호합니다.

## 3. 사용 사례 (Use Cases)

- **데이터 레이크 현대화 및 마이그레이션**: 온프레미스 Hadoop 및 Spark 워크로드를 클라우드로 쉽게 이전할 수 있습니다.
- **대규모 일괄 ETL 처리**: 대규모 데이터 세트를 효율적으로 처리하고 변환합니다.
- **데이터 과학 및 머신러닝**: 대규모 모델 학습 및 고급 분석을 위한 맞춤형 환경을 구축하고 Vertex AI와 통합하여 MLOps를 구현합니다.
- **다양한 분석 엔진 실행**: 대화형 SQL을 위한 Trino나 스트림 처리를 위한 Flink 등 특정 목적에 맞는 전용 클러스터를 배포할 수 있습니다.

---

## 4. 현재 구현된 수집 기능 (Based on Source Code)

이 섹션은 현재 SpaceONE 플러그인에서 실제로 구현하고 수집하는 Dataproc 리소스의 상세 내역을 기술합니다.

### 4.1. 수집 리소스
- **Dataproc Cluster**: Google Cloud 프로젝트 내의 모든 Dataproc 클러스터를 수집 대상으로 합니다.

### 4.2. 핵심 수집 데이터
- **기본 정보**: 클러스터 이름, UUID, 프로젝트 ID, 위치(리전/존), 상태(생성중, 실행중, 에러 등), 생성 시간, 라벨
- **클러스터 구성 (Cluster Configuration)**:
  - **GCE 클러스터 설정**: Zone, 네트워크/서브네트워크 URI, 내부 IP 전용 여부, 서비스 계정 정보
  - **인스턴스 그룹 설정**: 마스터/워커 노드의 인스턴스 수, 머신 타입, 디스크 타입 및 크기, 이미지 URI
  - **소프트웨어 설정**: 이미지 버전, 선택적 구성 요소(Optional Components)
  - **스토리지 설정**: 설정 및 임시 작업을 위한 Cloud Storage 버킷 정보
- **작업(Job) 정보**: `list_jobs` 커넥터 메서드를 통해 클러스터와 연관된 작업 목록을 조회할 수 있는 기능이 구현되어 있습니다.

### 4.3. 수집 메트릭
- **클러스터 CPU 사용률 (cluster_cpu_utilization)**: 클러스터의 평균 CPU 사용률을 수집합니다.
- **클러스터 메모리 사용률 (cluster_memory_utilization)**: 클러스터의 평균 메모리 사용률을 수집합니다.

### 4.4. 주요 구현 기능
- Google Cloud API를 통해 각 프로젝트의 모든 리전에 있는 Dataproc 클러스터 정보를 조회합니다.
- 수집된 데이터를 SpaceONE의 Cloud Service 모델 형식에 맞게 변환합니다.
- SpaceONE 콘솔에서 사용자가 클러스터 정보를 쉽게 파악할 수 있도록 동적 테이블 및 항목 레이아웃을 제공합니다.